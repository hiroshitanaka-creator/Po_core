# Po_core Viewer Payload Schema

The Po_core viewer consumes deterministic traces generated by `po-core` and
repackages them into lightweight payloads that can drive interactive visual
components. The schema focuses on three visual layers: a tension map, an ethical
pressure chart, and a semantic evolution timeline.

## JSON Schema (informal)

```json
{
  "prompt": "<str - user supplied prompt>",
  "generated_at": "<ISO-8601 timestamp>",
  "tension_map": [
    {
      "philosopher": "<str>",
      "confidence": 0.0,
      "tension": 0.0,
      "drivers": ["<summary>", "<tag>"]
    }
  ],
  "ethical_pressure": [
    {
      "dimension": "<str - dimension label>",
      "pressure": 0.0,
      "narrative": "<str - human readable guardrail>"
    }
  ],
  "semantic_evolution": [
    {
      "stage": "<str - prompt|ensemble|trace>",
      "signal": "<str - signal captured at stage>",
      "influence": ["<actors>"] ,
      "cumulative_meaning": "<str - running interpretation>"
    }
  ],
  "source_trace": {
    "prompt": "<original prompt>",
    "philosophers": ["<names>", "..."] ,
    "created_at": "<ISO-8601>",
    "events": [
      {"event": "<str>", "philosophers": 0},
      {"event": "<str>", "results_recorded": 0, "status": "<str>"}
    ]
  }
}
```

### Field notes
- **tension_map**: inverts philosopher confidence scores to reveal disagreement
  hot spots. Values near `1.0` indicate high tension.
- **ethical_pressure**: applies a light-weight weighting to confidence to expose
  how each philosopher constrains the narrative.
- **semantic_evolution**: captures the meaning shifts from the raw prompt through
  ensemble synthesis into the trace lifecycle.
- **source_trace**: retains the raw log so that UI layers can drill down when
  needed.

## CLI Usage

Export a viewer-ready payload directly from the CLI:

```bash
po-core viewer export "What does authenticity mean?" --format json
```

The command prints the payload described above, ready for downstream
visualizations or snapshot testing.
